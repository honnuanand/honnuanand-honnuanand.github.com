---
layout: post
title: Cleanup Azure PCF install using BBL
date: '2018-08-09T23:09:00.002-07:00'
author: Anand Rao
tags:
- Pivotal Cloud Foundry
- PCF
- Cloud Foundry
modified_time: '2018-08-09T23:18:06.053-07:00'
thumbnail: https://4.bp.blogspot.com/-TNuPZhBtRPo/W20roXa3ehI/AAAAAAAAGQE/mOvrp5-sEv88KBkXVOmgSzq91w6G3tbDwCLcBGAs/s72-c/terraform.state.delete.png
blogger_id: tag:blogger.com,1999:blog-3696969976504014907.post-6812316351514119746
blogger_orig_url: https://blog.clue2solve.io/2018/08/cleanup-azure-pcf-install-using-bbl.html
---

The Power of using automation and starting to look at the <a href="https://content.pivotal.io/blog/product-all-the-things">platform as a product</a> is that you can wipe out everything and be sure that you can get back to the same state you were in.<br /><div><br /></div><div>To Test out that Theory ,&nbsp; I decided to use&nbsp; the bbl tool to blow the platform off and&nbsp; then rerun the pipeline&nbsp; and get back to this state. Thanks&nbsp; to my good friend Zack Bergquist for pointing me in this direction.<br /><br />bbl has this very powerful ( I mean ,&nbsp; be careful when you run it ) feature that connects to your IAAS using your credentials provided.<br /><br />A quick execution sample is here:&nbsp;</div><div><pre><code><span style="background-color: #f3f3f3;">anandrao at Anands-MBP in ~/pivotal/repos/bbl-az/bbl<br />$ bbl cleanup-leftovers<br />[Resource Group: araoc2sterraform] Delete? (y/N): n<br />[Resource Group: bbl-env-caspian-2018-08-07t01-09z-bosh] Delete? (y/N): n<br />[Resource Group: bbl-env-ontario-2018-07-31t05-15z-bosh] Delete? (y/N): n<br />[Resource Group: c2s] Delete? (y/N): y<br />[Resource Group: cloud-shell-storage-westus] Delete? (y/N): n<br />[Resource Group: dns] Delete? (y/N): n<br />[Resource Group: jump] Delete? (y/N): n<br />[Resource Group: c2s] Deleting...<br />[Resource Group: c2s] Deleted!<br /><br />anandrao at Anands-MBP in ~/pivotal/repos/bbl-az/bbl<i><br /><br /><br /></i></span></code></pre><pre><code><pre></pre></code></pre><pre><code><br /></code><br /></pre>Notice , I did not delete my DNS zones, bbl and other groups. The only Group I deleted was "c2s" the Resource group that had my Full PCF install.&nbsp;</div><div><br /></div><div>Along with that ,&nbsp; I will have to delete the terraform.state file on the container created for this.&nbsp;</div><div><br /></div><div>You could do that on command line via the azure cli or the UI as below :&nbsp;</div><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-TNuPZhBtRPo/W20roXa3ehI/AAAAAAAAGQE/mOvrp5-sEv88KBkXVOmgSzq91w6G3tbDwCLcBGAs/s1600/terraform.state.delete.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="861" data-original-width="1600" height="215" src="https://4.bp.blogspot.com/-TNuPZhBtRPo/W20roXa3ehI/AAAAAAAAGQE/mOvrp5-sEv88KBkXVOmgSzq91w6G3tbDwCLcBGAs/s400/terraform.state.delete.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">When you are ready to bring back your PCF Foundation ,&nbsp; dont forget to run the "bootstrap-Terraform" Job. It creates a fresh state file. Basically follow the instructions on the<a href="http://blog.clue2solve.io/2018/08/installing-pcf-2x-on-azure-using.html"> part 3 </a>of the blog series to get you there.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Quick links to the "The PCF on Azure" Blog Series :&nbsp;</div><div class="separator" style="clear: both; text-align: left;"></div><ul><li><a href="http://blog.clue2solve.io/2018/07/installing-pcf-2x-on-azure-using.html">Installing PCF 2.X on Azure using Concourse - Part - 1 , Bosh Boot loader and bosh</a></li><li><a href="http://blog.clue2solve.io/2018/07/installing-pcf-2x-on-azure-using_31.html">Installing PCF 2.X on Azure using Concourse - Part - 2 , Concourse using bosh</a></li><li><a href="http://blog.clue2solve.io/2018/08/installing-pcf-2x-on-azure-using.html">Installing PCF 2.X on Azure using Concourse - Part - 3 , Installing Pivotal Cloud Foundry using a Pipeline</a></li><li><a href="http://blog.clue2solve.io/2018/07/domain-name-system-dns-delegation-with.html">Domain Name System (DNS) Delegation with Azure DNS Zones</a></li><li><a href="http://blog.clue2solve.io/2018/08/cleanup-azure-pcf-install-using-bbl.html">Cleanup Azure PCF install using BBL</a></li></ul><br /><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div><br /></div>